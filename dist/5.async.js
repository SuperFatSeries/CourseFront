(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"0J5j":function(e,t,a){e.exports={standardList:"antd-pro-pages-course-homework-homeworks-standardList",headerInfo:"antd-pro-pages-course-homework-homeworks-headerInfo",listContent:"antd-pro-pages-course-homework-homeworks-listContent",listContentItem:"antd-pro-pages-course-homework-homeworks-listContentItem",extraContentSearch:"antd-pro-pages-course-homework-homeworks-extraContentSearch",listCard:"antd-pro-pages-course-homework-homeworks-listCard",standardListForm:"antd-pro-pages-course-homework-homeworks-standardListForm",formResult:"antd-pro-pages-course-homework-homeworks-formResult"}},ALo4:function(e,t,a){"use strict";var n=a("FfR7");Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r=n(a("NuQ2"));a("GDzo");var l=n(a("lsKN")),o=n(a("nsw/")),d=n(a("rdAL")),u=n(a("iczh")),i=n(a("hDW5"));function c(e){var t=e.className,a=e.type,n=e.title,c=e.description,s=e.extra,m=e.actions,f=(0,o.default)(e,["className","type","title","description","extra","actions"]),p={error:d.default.createElement(l.default,{className:i.default.error,type:"close-circle",theme:"filled"}),success:d.default.createElement(l.default,{className:i.default.success,type:"check-circle",theme:"filled"})},h=(0,u.default)(i.default.result,t);return d.default.createElement("div",(0,r.default)({className:h},f),d.default.createElement("div",{className:i.default.icon},p[a]),d.default.createElement("div",{className:i.default.title},n),c&&d.default.createElement("div",{className:i.default.description},c),s&&d.default.createElement("div",{className:i.default.extra},s),m&&d.default.createElement("div",{className:i.default.actions},m))}},DOM4:function(e,t,a){"use strict";var n=a("Dthn"),r=a("FfR7");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getBreadcrumb=void 0,a("Jg0v");var l=r(a("gJU/")),o=r(a("ee8y")),d=r(a("b4l6")),u=r(a("0wiU")),i=r(a("SnMR")),c=r(a("GZrC")),s=r(a("nH91")),m=n(a("rdAL")),f=r(a("UaMt")),p=r(a("tbSg")),h=a("S/9j"),v=function(e,t){var a=e[t];return a||Object.keys(e).forEach(function(n){(0,f.default)(n).test(t)&&(a=e[n])}),a||{}};t.getBreadcrumb=v;var b=function(e){function t(){var e,a;(0,d.default)(this,t);for(var n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return a=(0,i.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(r))),a.state={breadcrumb:null},a.getBreadcrumbDom=function(){var e=a.conversionBreadcrumbList();a.setState({breadcrumb:e})},a.getBreadcrumbProps=function(){var e=a.props,t=e.routes,n=e.params,r=e.location,l=e.breadcrumbNameMap;return{routes:t,params:n,routerLocation:r,breadcrumbNameMap:l}},a.conversionFromProps=function(){var e=a.props,t=e.breadcrumbList,n=e.breadcrumbSeparator,r=e.itemRender,d=e.linkElement,u=void 0===d?"a":d;return m.default.createElement(l.default,{className:p.default.breadcrumb,separator:n},t.map(function(e){var t=r?r(e):e.title;return m.default.createElement(l.default.Item,{key:e.title},e.href?(0,m.createElement)(u,(0,o.default)({},"a"===u?"href":"to",e.href),t):t)}))},a.conversionFromLocation=function(e,t){var n=a.props,r=n.breadcrumbSeparator,d=n.home,u=n.itemRender,i=n.linkElement,c=void 0===i?"a":i,s=(0,h.urlToList)(e.pathname),f=s.map(function(e,a){var n=v(t,e);if(n.inherited)return null;var r=a!==s.length-1&&n.component,d=u?u(n):n.name;return n.name&&!n.hideInBreadcrumb?m.default.createElement(l.default.Item,{key:e},(0,m.createElement)(r?c:"span",(0,o.default)({},"a"===c?"href":"to",e),d)):null});return f.unshift(m.default.createElement(l.default.Item,{key:"home"},(0,m.createElement)(c,(0,o.default)({},"a"===c?"href":"to","/"),d||"Home"))),m.default.createElement(l.default,{className:p.default.breadcrumb,separator:r},f)},a.conversionBreadcrumbList=function(){var e=a.props,t=e.breadcrumbList,n=e.breadcrumbSeparator,r=a.getBreadcrumbProps(),o=r.routes,d=r.params,u=r.routerLocation,i=r.breadcrumbNameMap;return t&&t.length?a.conversionFromProps():o&&d?m.default.createElement(l.default,{className:p.default.breadcrumb,routes:o.filter(function(e){return e.breadcrumbName}),params:d,itemRender:a.itemRender,separator:n}):u&&u.pathname?a.conversionFromLocation(u,i):null},a.itemRender=function(e,t,n,r){var l=a.props.linkElement,o=void 0===l?"a":l,d=n.indexOf(e)===n.length-1;return d||!e.component?m.default.createElement("span",null,e.breadcrumbName):(0,m.createElement)(o,{href:r.join("/")||"/",to:r.join("/")||"/"},e.breadcrumbName)},a}return(0,s.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.getBreadcrumbDom()}},{key:"componentDidUpdate",value:function(e){var t=this.props.location;if(t&&e.location){var a=e.location.pathname;a!==t.pathname&&this.getBreadcrumbDom()}}},{key:"render",value:function(){var e=this.state.breadcrumb;return e}}]),t}(m.PureComponent);t.default=b},Dnn4:function(e,t,a){e.exports={content:"antd-pro-components-page-header-wrapper-index-content"}},LIIa:function(e,t,a){"use strict";var n=a("Dthn"),r=a("FfR7");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("jwET");var l=r(a("IP8+")),o=r(a("NuQ2")),d=r(a("b4l6")),u=r(a("0wiU")),i=r(a("SnMR")),c=r(a("GZrC")),s=r(a("nH91"));a("386e");var m=r(a("pASV")),f=n(a("rdAL")),p=r(a("iczh")),h=r(a("tbSg")),v=r(a("DOM4")),b=m.default.TabPane,g=function(e){function t(){var e,a;(0,d.default)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=(0,i.default)(this,(e=(0,c.default)(t)).call.apply(e,[this].concat(r))),a.onChange=function(e){var t=a.props.onTabChange;t&&t(e)},a}return(0,s.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.logo,n=e.action,r=e.content,d=e.extraContent,u=e.tabList,i=e.className,c=e.tabActiveKey,s=e.tabDefaultActiveKey,g=e.tabBarExtraContent,E=e.loading,w=void 0!==E&&E,k=e.wide,y=void 0!==k&&k,x=e.hiddenBreadcrumb,N=void 0!==x&&x,C=(0,p.default)(h.default.pageHeader,i),S={};return void 0!==s&&(S.defaultActiveKey=s),void 0!==c&&(S.activeKey=c),f.default.createElement("div",{className:C},f.default.createElement("div",{className:y?h.default.wide:""},f.default.createElement(l.default,{loading:w,title:!1,active:!0,paragraph:{rows:3},avatar:{size:"large",shape:"circle"}},N?null:f.default.createElement(v.default,this.props),f.default.createElement("div",{className:h.default.detail},a&&f.default.createElement("div",{className:h.default.logo},a),f.default.createElement("div",{className:h.default.main},f.default.createElement("div",{className:h.default.row},t&&f.default.createElement("h1",{className:h.default.title},t),n&&f.default.createElement("div",{className:h.default.action},n)),f.default.createElement("div",{className:h.default.row},r&&f.default.createElement("div",{className:h.default.content},r),d&&f.default.createElement("div",{className:h.default.extraContent},d)))),u&&u.length?f.default.createElement(m.default,(0,o.default)({className:h.default.tabs},S,{onChange:this.onChange,tabBarExtraContent:g}),u.map(function(e){return f.default.createElement(b,{tab:e.tab,key:e.key})})):null)))}}]),t}(f.PureComponent);t.default=g},R1Dz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("rdAL"),r=(0,n.createContext)();t.default=r},"S/9j":function(e,t,a){"use strict";function n(e){var t=e.split("/").filter(function(e){return e});return t.map(function(e,a){return"/".concat(t.slice(0,a+1).join("/"))})}Object.defineProperty(t,"__esModule",{value:!0}),t.urlToList=n},hDW5:function(e,t,a){e.exports={result:"antd-pro-components-result-index-result",icon:"antd-pro-components-result-index-icon",success:"antd-pro-components-result-index-success",error:"antd-pro-components-result-index-error",title:"antd-pro-components-result-index-title",description:"antd-pro-components-result-index-description",extra:"antd-pro-components-result-index-extra",actions:"antd-pro-components-result-index-actions"}},"lh+i":function(e,t,a){e.exports={main:"antd-pro-components-page-header-wrapper-grid-content-main",wide:"antd-pro-components-page-header-wrapper-grid-content-wide"}},ncdk:function(e,t,a){"use strict";var n=a("FfR7"),r=a("Dthn");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("/LQs");var l=n(a("MCn1"));a("jwET");var o=n(a("IP8+"));a("4BOC");var d=n(a("R3oX")),u=n(a("NuQ2"));a("3uLX");var i=n(a("KNZI"));a("j/mp");n(a("xyzw"));a("GDzo");var c=n(a("lsKN"));a("keoh");n(a("zRHM"));a("Pb5c");var s=n(a("+UQ5"));a("yKRY");var m=n(a("n/hC"));a("6li1");var f=n(a("fOk2"));a("P1YT");var p=n(a("81q7")),h=n(a("b4l6")),v=n(a("0wiU")),b=n(a("SnMR")),g=n(a("GZrC")),E=n(a("nH91"));a("JV4z");var w=n(a("gBGB"));a("tgWl");var k=n(a("GzqX"));a("GKS1");var y=n(a("38+e"));a("eqO2");var x=n(a("ON82"));a("8/ay");var N,C,S,D,L=n(a("m5mn")),I=r(a("rdAL")),R=(a("FFPy"),n(a("uo9F"))),M=a("LneV"),_=(n(a("zHco")),n(a("ALo4"))),q=n(a("0J5j")),F=a("KmB0"),H=(n(a("6GhY")),L.default.Item),P=x.default.Button,O=x.default.Group,j=(y.default.Option,k.default.Search),B=k.default.TextArea,z=(w.default.Dragger,N=(0,M.connect)(function(e){var t=e.course,a=e.homework,n=e.loading;return{course:t,homework:a,loading:n.models.homework}}),C=L.default.create(),N(S=C((D=function(e){function t(){var e,a;(0,h.default)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=(0,b.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(r))),a.state={reqVisible:!1,visible:!1,done:!1,reqDone:!1},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.normFile=function(e){return a.setState({file_:e.file.originFileObj}),e&&e.fileList},a.showModal=function(){a.setState({visible:!0,current:void 0})},a.showEditModal=function(e){a.setState({visible:!0,current:e})},a.handleDone=function(){a.setState({done:!1,visible:!1})},a.handleCancel=function(){a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.dispatch,r=(t.form,a.state.current);r&&r.id;a.props.form.validateFields(function(e,t){var l=new FormData;l.append("student_id",t.id),l.append("name",t.name),l.append("remark",t.remark?t.remark:" "),l.append("file",a.state.file_),e?console.error(e):(a.setState({done:!0}),n({type:"homework/postHomeworkSubmit",payload:{courseId:a.props.match.params.courseId,homeworkId:r.id,sdata:l}}))})},a.handleReqDone=function(){a.setState({reqDone:!1,reqVisible:!1})},a.handleReqCancel=function(){a.setState({reqVisible:!1})},a.handleReqSubmit=function(e){e.preventDefault(),a.showModal()},a.submitHomework=function(e){a.props.dispatch;a.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)})},a.computePercent=function(e,t){var a=(0,R.default)(e).format("X"),n=(0,R.default)(t).format("X"),r=(0,R.default)().format("X");return 100-Number((100*(a-r)/(a-n)).toFixed(2))},a}return(0,E.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"course/queryHomeworkList",payload:{courseId:this.props.match.params.courseId,page:0,size:10}})}},{key:"showHomeworkReqModal",value:function(){this.setState({reqVisible:!0})}},{key:"computeStatus",value:function(e,t){var a=this.computePercent(e,t);return a<100?(console.log("active"),"active"):(console.log("success"),"success")}},{key:"requestHomeworkDetail",value:function(e){var t=this.props.dispatch;t({type:"homework/queryHomeworkDetail",payload:{courseId:this.props.match.params.courseId,homeworkId:e,page:0,size:10}}),t({type:"homework/queryHomeworkSubmitList",payload:{courseId:this.props.match.params.courseId,homeworkId:e,page:0,size:10}}),this.showHomeworkReqModal()}},{key:"renderHomeworkRquirement",value:function(){var e=this.props.homework,t=e.data,a=e.submitList;console.log("renderHomeworkRquirement:"+t),console.log("renderHomeworkRquirement:"+JSON.stringify(a));for(var n=[{title:"\u5b66\u53f7",dataIndex:"student_id",key:"student_id",width:"20%"},{title:"\u59d3\u540d",dataIndex:"student_name",key:"student_name",width:"20%"},{title:"\u6587\u4ef6\u540d",dataIndex:"file_name",key:"file_name"},{title:"\u4e0a\u6b21\u63d0\u4ea4",dataIndex:"update_time_str",key:"update_time_str"},{title:"\u63d0\u4ea4\u6b21\u6570",dataIndex:"commit_count",key:"commit_count"}],r=0,l=a.length;r<l;r++)a[r].update_time_str=(0,R.default)(a[r].update_time).format("YYYY-MM-DD HH:mm");return I.default.createElement("div",null,I.default.createElement(F.MarkdownPreview,{value:t.requirement}),I.default.createElement(p.default,null),I.default.createElement("h4",null,"\u63d0\u4ea4\u5217\u8868"),I.default.createElement(f.default,{columns:n,dataSource:a}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.course.list,n=t.homework.submitResult,r=t.loading,f=this.props.form.getFieldDecorator,p=this.state,h=p.reqVisible,v=p.reqDone,b=p.visible,g=p.done,E=p.current,y=void 0===E?{}:E,x=(p.file_,{rows:1}),N=g?{footer:null,onCancel:this.handleDone}:{okText:"\u63d0\u4ea4",onOk:this.handleSubmit,cancelText:"\u53d6\u6d88",onCancel:this.handleCancel},C=g?{footer:null,onCancel:this.handleReqDone}:{okText:"\u63d0\u4ea4",onOk:this.handleReqSubmit,cancelText:"\u5173\u95ed",onCancel:this.handleReqCancel},S=I.default.createElement("div",{className:q.default.extraContent},I.default.createElement(O,{defaultValue:"all"},I.default.createElement(P,{value:"all"},"\u5168\u90e8"),I.default.createElement(P,{value:"progress"},"\u8fdb\u884c\u4e2d"),I.default.createElement(P,{value:"waiting"},"\u5df2\u622a\u6b62")),I.default.createElement(j,{className:q.default.extraContentSearch,placeholder:"\u8bf7\u8f93\u5165",onSearch:function(){return{}}})),D=function(t){var a=t.data,n=a.owner,r=a.createdTime,l=a.ddl;a.percent;return I.default.createElement("div",{className:q.default.listContent},I.default.createElement("div",{className:q.default.listContentItem},I.default.createElement("span",null,"\u7f16\u8f91\u4eba"),I.default.createElement("p",null,n)),I.default.createElement("div",{className:q.default.listContentItem},I.default.createElement("span",null,"\u622a\u6b62\u65f6\u95f4"),I.default.createElement("p",null,(0,R.default)(l).format("YYYY-MM-DD HH:mm"))),I.default.createElement("div",{className:q.default.listContentItem},I.default.createElement(s.default,{percent:e.computePercent(l,r),status:e.computeStatus(l,r),strokeWidth:6,style:{width:180}})))},M=function(){return g&&0==n.code?I.default.createElement(_.default,{type:"success",title:"\u63d0\u4ea4\u6210\u529f",description:n.msg,actions:I.default.createElement(i.default,{type:"primary",onClick:e.handleDone},"\u77e5\u9053\u4e86"),className:q.default.formResult}):g&&0!=n.code?I.default.createElement(_.default,{type:"error",title:"\u63d0\u4ea4\u5931\u8d25",description:n.msg,actions:I.default.createElement(i.default,{type:"primary",onClick:e.handleDone},"\u77e5\u9053\u4e86"),className:q.default.formResult}):I.default.createElement(L.default,{onSubmit:e.handleSubmit},I.default.createElement(H,(0,u.default)({label:"\u5b66\u53f7"},e.formLayout),f("id",{rules:[{required:!0,message:"\u8bf7\u8f93\u51658\u4f4d\u5b66\u53f7",min:8}]})(I.default.createElement(k.default,{placeholder:"\u8bf7\u8f93\u5165\u5b66\u53f7"}))),I.default.createElement(H,(0,u.default)({label:"\u59d3\u540d"},e.formLayout),f("name",{rules:[{required:!0,message:"\u59d3\u540d\u957f\u5ea6\u5e94\u5927\u4e8e2",min:2}]})(I.default.createElement(k.default,{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),I.default.createElement(L.default.Item,(0,u.default)({},e.formLayout,{label:"\u6587\u4ef6"}),I.default.createElement("div",{className:"dropbox"},f("dragger",{valuePropName:"fileList",getValueFromEvent:e.normFile})(I.default.createElement(w.default.Dragger,{name:"files",action:"/upload.do"},I.default.createElement("p",{className:"ant-upload-drag-icon"},I.default.createElement(c.default,{type:"inbox"})),I.default.createElement("p",{className:"ant-upload-text"},"\u70b9\u51fb\u6216\u62d6\u52a8\u5230\u6b64\u5904\u4e0a\u4f20\u4f5c\u4e1a"),I.default.createElement("p",{className:"ant-upload-hint"},"\u8865\u4ea4\u53ef\u6dfb\u52a0\u5907\u6ce8\uff0c\u8bf4\u660e\u8fdf\u4ea4\u539f\u56e0."))))),I.default.createElement(H,(0,u.default)({},e.formLayout,{label:"\u5907\u6ce8"}),f("remark",{rules:[{message:"",min:0}]})(I.default.createElement(B,{rows:4,placeholder:"\u989d\u5916\u5907\u6ce8"}))))};return I.default.createElement("div",null,I.default.createElement("div",{className:q.default.standardList},I.default.createElement(l.default,{className:q.default.listCard,bordered:!1,style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"},extra:S},I.default.createElement(d.default,{size:"large",rowKey:"id",dataSource:a,renderItem:function(t){return I.default.createElement(o.default,{loading:r,active:!0,paragraph:x},I.default.createElement(d.default.Item,{actions:[I.default.createElement("a",{onClick:function(a){a.preventDefault(),e.showEditModal(t)}},"\u63d0\u4ea4")]},I.default.createElement(d.default.Item.Meta,{title:I.default.createElement("a",{onClick:function(){return e.requestHomeworkDetail(t.id)}},t.name),description:""}),I.default.createElement(D,{data:t})))}}))),I.default.createElement(m.default,(0,u.default)({title:"\u4f5c\u4e1a\u8981\u6c42",className:q.default.standardListForm,width:900,bodyStyle:v?{padding:"72px 0"}:{padding:"28px 28px 28px 28px"},destroyOnClose:!0,visible:h},C),this.renderHomeworkRquirement()),I.default.createElement(m.default,(0,u.default)({title:g?null:"\u4f5c\u4e1a".concat(y?"\u4e0a\u4f20":"\u8865\u4ea4"),className:q.default.standardListForm,width:640,bodyStyle:g?{padding:"72px 0"}:{padding:"28px 0 0"},destroyOnClose:!0,visible:b},N),M()))}}]),t}(I.PureComponent),S=D))||S)||S),A=z;t.default=A},tbSg:function(e,t,a){e.exports={pageHeader:"antd-pro-components-page-header-index-pageHeader",wide:"antd-pro-components-page-header-index-wide",detail:"antd-pro-components-page-header-index-detail",row:"antd-pro-components-page-header-index-row",breadcrumb:"antd-pro-components-page-header-index-breadcrumb",tabs:"antd-pro-components-page-header-index-tabs",logo:"antd-pro-components-page-header-index-logo",title:"antd-pro-components-page-header-index-title",action:"antd-pro-components-page-header-index-action",content:"antd-pro-components-page-header-index-content",extraContent:"antd-pro-components-page-header-index-extraContent",main:"antd-pro-components-page-header-index-main"}},v99g:function(e,t,a){"use strict";var n=a("Dthn"),r=a("FfR7");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a("b4l6")),o=r(a("0wiU")),d=r(a("SnMR")),u=r(a("GZrC")),i=r(a("nH91")),c=n(a("rdAL")),s=a("LneV"),m=r(a("lh+i")),f=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(0,u.default)(t).apply(this,arguments))}return(0,i.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props,t=e.contentWidth,a=e.children,n="".concat(m.default.main);return"Fixed"===t&&(n="".concat(m.default.main," ").concat(m.default.wide)),c.default.createElement("div",{className:n},a)}}]),t}(c.PureComponent),p=(0,s.connect)(function(e){var t=e.setting;return{contentWidth:t.contentWidth}})(f);t.default=p},zHco:function(e,t,a){"use strict";var n=a("FfR7");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("NuQ2")),l=n(a("nsw/")),o=n(a("rdAL")),d=a("UPVw"),u=n(a("d20F")),i=n(a("LIIa")),c=a("LneV"),s=n(a("v99g")),m=n(a("Dnn4")),f=n(a("R1Dz")),p=function(e){var t=e.children,a=e.contentWidth,n=e.wrapperClassName,c=e.top,p=(0,l.default)(e,["children","contentWidth","wrapperClassName","top"]);return o.default.createElement("div",{style:{margin:"-24px -24px 0"},className:n},c,o.default.createElement(f.default.Consumer,null,function(e){return o.default.createElement(i.default,(0,r.default)({wide:"Fixed"===a,home:o.default.createElement(d.FormattedMessage,{id:"menu.home",defaultMessage:"Home"})},e,{key:"pageheader"},p,{linkElement:u.default,itemRender:function(e){return e.locale?o.default.createElement(d.FormattedMessage,{id:e.locale,defaultMessage:e.title}):e.title}}))}),t?o.default.createElement("div",{className:m.default.content},o.default.createElement(s.default,null,t)):null)},h=(0,c.connect)(function(e){var t=e.setting;return{contentWidth:t.contentWidth}})(p);t.default=h}}]);